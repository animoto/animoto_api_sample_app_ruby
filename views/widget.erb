<html>
  <head>
    <title>SunDawg's Animoto Widget</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
      $(document).ready( function() {
        document.getElementById('configuration').submit();
      });
    </script>
  </head>
  <body>
    <h1>SunDawg's Animoto Widget</h1> 
    <p><a href="/">Home</a></p>
    <p><a href="/widget?<%= request.query_string %>">Reload</a></p>
    <p><a href="/callbacks">View Callbacks</a></p>
    <form style="display: none" id="configuration" method="POST" target="widget" action="<%= Constants::App::HOST %>/workflow">
      <%# Repopulate the override parameters from the first HTML form %>
      <% CGI::unescape(request.query_string).split('&').each do |i| %>
        <% k, v = i.split("=") %>
        <input type="hidden" name="<%= k %>" value="<%= v %>"/>
      <% end %>

      <%# Enumate the signature requirements %>
      <% @params.each_pair do |k, v| %>
        <input type="hidden" name="<%= k %>" value="<%= v %>"/>
      <% end %>
    </form>

    <iframe id="widget" width="100%" height="100%" scrolling="no" frameborder="0"/>
  </body>
</html>
